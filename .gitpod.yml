# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.

tasks:
  - name: Apt update
    init: sudo apt update
  - name: Apt install
    init: sudo apt install --no-install-recommends -y \
        ipython3 python3-setuptools python3-venv python3-dev \
        texlive-xetex gettext libjs-bootstrap4 fonts-font-awesome git
  - name : Install requirements
    init: pip3 install -r requirements.txt
  - name : Setup env
    init: cp .env_example .env
  - name: Django collectstatic
    init: python3 manage.py collectstatic --noinput
  - name: Django compilemessages
    init: python3 manage.py compilemessages
  - name: Django makemigrations
    init: python3 manage.py makemigrations
  - name: Django migrate
    init: python3 manage.py migrate
  - name: Django loaddata
    init: python3 manage.py loaddata initial
  - name: Django create dev superuser
    init: python3 manage.py shell -c "from django.contrib.auth.models import User; User.objects.create_superuser('admin', 'admin@example.com', 'adminpass')"
  - name: Django start server
    command: python3 manage.py runserver 0.0.0.0:8000
ports:
  - port: 8000
    onOpen: open-preview
  


